<mxfile host="app.diagrams.net" modified="2023-08-17T13:30:45.064Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36" etag="FTlL8yYqsOiUHeKUHJ_5" version="21.6.8" type="github" pages="2">
  <diagram name="Página-1" id="OCQVt_zFbdHCXUs0rtO8">
    <mxGraphModel dx="2074" dy="1184" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="3WI0bjOclUP90dEZoIG7-1" value="Get Fees Exchange Rates" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-201" y="33.5" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-7" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="3WI0bjOclUP90dEZoIG7-2" target="3WI0bjOclUP90dEZoIG7-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-2" value="Get Origin Base Rate" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-46" y="192" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-3" value="From Treasury" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="332" y="192" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-4" value="From Simulator" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="332" y="117" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-5" value="From Daily Exchange Rate" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="330" y="267" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-6" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="3WI0bjOclUP90dEZoIG7-2" target="3WI0bjOclUP90dEZoIG7-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="267" y="411" as="sourcePoint" />
            <mxPoint x="317" y="361" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-8" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="3WI0bjOclUP90dEZoIG7-2" target="3WI0bjOclUP90dEZoIG7-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="267" y="411" as="sourcePoint" />
            <mxPoint x="317" y="361" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-9" value="SP&lt;br&gt;FeesAndExchangesByFormOfPayment" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-46" y="426.5" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-10" value="El órden es&amp;nbsp;&lt;br style=&quot;font-size: 14px;&quot;&gt;1 Simulator&lt;br style=&quot;font-size: 14px;&quot;&gt;2 Treasury&lt;br style=&quot;font-size: 14px;&quot;&gt;3 Daily Exchange Rate" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-201" y="174" width="155" height="93" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-11" value="Origin&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Country&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;State&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Currency&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Amount&lt;br&gt;Destination&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Country&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Currency&lt;br&gt;Style&lt;br&gt;Reciving Option&lt;br&gt;Payer&lt;br&gt;Partner&lt;br&gt;Base Rate Option&lt;br&gt;Is Employee" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-179" y="323" width="125" height="267" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-12" value="Desde una config, según Country y Currency" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="615" y="113.5" width="368" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-13" value="Desde una config, según Country y Currency" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="615" y="192" width="317" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-14" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="3WI0bjOclUP90dEZoIG7-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="407" y="411" as="sourcePoint" />
            <mxPoint x="86" y="309" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-15" value="Base Rate Option" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="93" y="282" width="124" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-16" value="Si el Destination Currency es USD&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Base Rate = 1&lt;br&gt;Sino&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Base Rate = &lt;span style=&quot;background-color: rgb(128, 255, 0);&quot;&gt;[dbo].[BaseRateCalculator]&lt;/span&gt; @DestinationCountryName, @DestinationCurrencyCode, &lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;@BaseRateOption&lt;/span&gt;&lt;br&gt;&amp;nbsp; &amp;nbsp;&lt;br&gt;SP&amp;nbsp;&lt;span style=&quot;background-color: rgb(128, 255, 0);&quot;&gt;[dbo].[BaseRateCalculator]&lt;/span&gt;&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;span style=&quot;&quot;&gt;@BaseRateOption = 1&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;WirePricing.[dbo].[PricingEngine_GetBaseRate]&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;@BaseRateOption = 2&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;SqlMain.WireTransac.[dbo].[PricingEngine_GetBaseRate_PurchasesSalesProjectionProposalPurchases]&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;Else&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;SqlMain.WireTransac.[dbo].[PricingEngine_GetBaseRate_FromDailyExRateGain]&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;br&gt;Se usa el &lt;b&gt;Base Rate&lt;/b&gt; obtenido como base.&lt;br&gt;&lt;br&gt;El &lt;b&gt;Rate &lt;/b&gt;final se calcula:&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;Es igual al &lt;b&gt;Base Rate&lt;br&gt; &lt;/b&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;si exchangeRate.Id = null y FeeBand != null&lt;br&gt;Es igual al &lt;b&gt;Base Rate aplicado con BPS&lt;br&gt; &lt;/b&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;si exchangeRate.Id != null y no tiene Participating Payer&amp;nbsp;&lt;br&gt;Es igual al &lt;b&gt;Base Rate aplicado con Amount From The Base&lt;br&gt;&lt;/b&gt;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;si exchangeRate.Id != null y tiene Participating Payer&lt;/blockquote&gt;&lt;br&gt;&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;horizontal=1;" parent="1" vertex="1">
          <mxGeometry x="290" y="379" width="849" height="592" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-17" value="&lt;b&gt;OutputExchangeRateModel&lt;/b&gt;&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;PayerId&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;PayerCode&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;StyleId&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;Rate&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;RateBase&lt;br style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;span style=&quot;white-space: pre; font-size: 14px;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;DestinationAmount" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;horizontal=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-87" y="640" width="218" height="155" as="geometry" />
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-18" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="3WI0bjOclUP90dEZoIG7-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="97" y="492" as="sourcePoint" />
            <mxPoint x="107" y="769" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3WI0bjOclUP90dEZoIG7-19" value="&lt;h1&gt;Objetivo&lt;/h1&gt;&lt;p&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Analizar PE y ver cómo se obtiene actualmente el Base Rate&lt;/font&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-227" y="-97" width="963" height="79" as="geometry" />
        </mxCell>
        <mxCell id="DYW4CAa3zaAFY--6UjeH-1" value="Según Country y Currency" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="615" y="267" width="317" height="30" as="geometry" />
        </mxCell>
        <mxCell id="DYW4CAa3zaAFY--6UjeH-2" value="&lt;div&gt;SELECT TOP(1) @BaseRate = [p].[ExRateCost]&lt;/div&gt;&lt;div&gt;FROM dbo.[Prc_ExRateSimulation] AS [p]&lt;span style=&quot;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;WHERE ([p].[SimCountry] = &lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;@DestinationCountry&lt;/span&gt;) AND ([p].[SimStatus] = N&#39;W&#39;)&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;ORDER BY [p].[SimDate] DESC, [p].[SimulationID] DESC&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="925" y="33.5" width="580" height="83.5" as="geometry" />
        </mxCell>
        <mxCell id="DYW4CAa3zaAFY--6UjeH-3" value="&lt;div&gt;SELECT TOP(1) @BaseRate = [t3].[PurchaseFX]&lt;/div&gt;&lt;div&gt;FROM dbo.[Tr_PurchasesSalesProjectionProposalPurchases] AS [t]&lt;span style=&quot;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;INNER JOIN dbo.[Tr_SalesProjection_Proposal_Purchases] AS [t0] ON [t].[SalesProjectionProposalPurchasesId] = [t0].[PurchaseId]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;INNER JOIN dbo.[Tr_SalesProjection_Proposal] AS [t1] ON [t0].[ProposalId] = [t1].[ProposalId]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;INNER JOIN dbo.[Tr_SalesProjections] AS [t2] ON [t1].[SaleProjectionId] = [t2].[SaleProjectionId]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;INNER JOIN dbo.[Tr_Purchases] AS [t3] ON [t].[PurchaseId] = [t3].[PurchaseId]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;WHERE (((UPPER(LTRIM(RTRIM([t2].[Currency]))) = &lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;@DestinationCurrency&lt;/span&gt;) AND [t0].[RecurringPurchaseId] IS NULL) AND ([t3].[PurchaseStatus] &amp;lt;&amp;gt; N&#39;C&#39;))&amp;nbsp;&lt;/div&gt;&lt;div&gt;AND (UPPER(LTRIM(RTRIM([t3].[Country]))) = &lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;@DestinationCountry&lt;/span&gt;)&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;ORDER BY CONVERT(date, [t2].[ProjectionDate]) DESC, [t].[SalesProjectionProposalPurchasesId]&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="925" y="143.5" width="1266" height="143" as="geometry" />
        </mxCell>
        <mxCell id="DYW4CAa3zaAFY--6UjeH-4" value="&lt;div&gt;SELECT TOP(1)&amp;nbsp; @BaseRate = [p].[ExRateCost]&lt;/div&gt;&lt;div&gt;FROM dbo.[Prc_DailyExRateGain] AS [p]&lt;span style=&quot;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;WHERE (UPPER(LTRIM(RTRIM([p].[DestCurrencyCode]))) = &lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;@DestinationCurrency&lt;/span&gt;) AND (UPPER(LTRIM(RTRIM([p].[DestCountry]))) = &lt;span style=&quot;background-color: rgb(255, 255, 51);&quot;&gt;@DestinationCountry&lt;/span&gt;)&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;ORDER BY [p].[GainDate] DESC, [p].[DailyExrateGainId]&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="923" y="300" width="1266" height="82" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="I3klw0tIuXF-IG3VvV1k" name="Página-2">
    <mxGraphModel dx="2874" dy="1184" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="RFXM7rYlNF7DJsxFUGoo-1" value="Payers API&lt;br&gt;GET /api/banks" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-440" y="142" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-1" value="Wiresearch&lt;br&gt;View&amp;nbsp;ViewPayersForBankDeposit" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-133" y="231" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-3" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="2DPNLBjlpTul-_Ri6KPm-1" target="2DPNLBjlpTul-_Ri6KPm-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="157" y="428" as="sourcePoint" />
            <mxPoint x="-370" y="348" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-4" value="listado" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;" vertex="1" connectable="0" parent="2DPNLBjlpTul-_Ri6KPm-3">
          <mxGeometry x="0.432" y="-1" relative="1" as="geometry">
            <mxPoint x="-7" y="-20" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-5" value="Payer Bank" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=middle;align=center;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="-318" y="291" width="125" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-6" value="Pricing Engine API&lt;br&gt;GET&lt;br&gt;PricingEngine/GetExchangeRates" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-133" y="378" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-7" value="Pricing Engine API&lt;br style=&quot;font-size: 13px;&quot;&gt;GET&lt;br style=&quot;font-size: 13px;&quot;&gt;PricingEngine/GetExchangeRatesByPayers" style="rounded=0;whiteSpace=wrap;html=1;fontSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-133" y="500" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-8" value="Solo obtiene los payers que son PP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="141" y="515" width="139" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;" edge="1" parent="1" source="2DPNLBjlpTul-_Ri6KPm-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="37" y="528" as="sourcePoint" />
            <mxPoint x="-249" y="423" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-10" value="Ej: 12.92" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;" vertex="1" connectable="0" parent="2DPNLBjlpTul-_Ri6KPm-9">
          <mxGeometry x="0.3103" y="-1" relative="1" as="geometry">
            <mxPoint x="-16" y="-18" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-12" value="Payer Bank&lt;br&gt;Rate" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=center;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="-318" y="555" width="125" height="40" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-13" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="2DPNLBjlpTul-_Ri6KPm-7" target="2DPNLBjlpTul-_Ri6KPm-12">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-123" y="286" as="sourcePoint" />
            <mxPoint x="-183" y="317" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-14" value="listado" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;" vertex="1" connectable="0" parent="2DPNLBjlpTul-_Ri6KPm-13">
          <mxGeometry x="0.432" y="-1" relative="1" as="geometry">
            <mxPoint x="-6" y="-26" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-15" value="Aca se obtiene un rate general para todos los pagadores, cómo diferencio de un pagador no imx?" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;labelBackgroundColor=#FFCCCC;" vertex="1" parent="1">
          <mxGeometry x="141" y="383" width="475" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-17" value="Del listado de Payers que se obtiene, se itera y se verifica si es PP&lt;br&gt;Si es PP se aplica el rate obtenido en el listado de Get Rates By Payers&lt;br&gt;Si no es PP se aplica el rate obtenido en Get Fx Rate" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="-408" y="652" width="553" height="30" as="geometry" />
        </mxCell>
        <mxCell id="2DPNLBjlpTul-_Ri6KPm-18" value="Capaz en este punto se puede ir a la tabla Prc_FxBase para verificar si existe un FxSource distinto a Imx para el destino.&lt;br&gt;Si existe entonces se podria aplicar el valor de FxBase.&lt;br&gt;Pero también hay que aplicar el proceso de BPS si el AllowBPS = true" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;labelBackgroundColor=#80FF00;" vertex="1" parent="1">
          <mxGeometry x="141" y="415" width="553" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-4" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="-870" y="-16" width="334" height="326" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-5" value="WirePricing&lt;br&gt;Prc_FxBase" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="42" y="158" width="97" height="122" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-6" value="AllowBPS" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry y="52" width="73" height="53" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-7" value="FxSource" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="97" y="52" width="73" height="53" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-8" value="DestCountry" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="180" y="77" width="73" height="53" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-9" value="AgPayerCode" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="249" y="204" width="85" height="54" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-10" value="DestCurrency" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="222" y="137" width="84" height="55" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-11" value="FxBase" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="251" y="273" width="73" height="53" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-12" value="Imx" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="108" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-13" value="Visa" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="EVo8pNsg1WMPFgOCAEa_-4">
          <mxGeometry x="159" y="13" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-14" value="" style="endArrow=none;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-12" target="EVo8pNsg1WMPFgOCAEa_-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="429" y="321" as="sourcePoint" />
            <mxPoint x="479" y="271" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-15" value="" style="endArrow=none;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-7" target="EVo8pNsg1WMPFgOCAEa_-13">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="429" y="321" as="sourcePoint" />
            <mxPoint x="479" y="271" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-16" value="" style="endArrow=none;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-5" target="EVo8pNsg1WMPFgOCAEa_-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="471" y="238" as="sourcePoint" />
            <mxPoint x="521" y="188" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-17" value="" style="endArrow=none;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-5" target="EVo8pNsg1WMPFgOCAEa_-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="471" y="238" as="sourcePoint" />
            <mxPoint x="521" y="188" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-18" value="" style="endArrow=none;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-5" target="EVo8pNsg1WMPFgOCAEa_-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="471" y="238" as="sourcePoint" />
            <mxPoint x="521" y="188" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-19" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-5" target="EVo8pNsg1WMPFgOCAEa_-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="471" y="238" as="sourcePoint" />
            <mxPoint x="521" y="188" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-20" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-5" target="EVo8pNsg1WMPFgOCAEa_-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="471" y="238" as="sourcePoint" />
            <mxPoint x="521" y="188" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-21" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="EVo8pNsg1WMPFgOCAEa_-4" source="EVo8pNsg1WMPFgOCAEa_-5" target="EVo8pNsg1WMPFgOCAEa_-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="471" y="238" as="sourcePoint" />
            <mxPoint x="521" y="188" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-22" value="Proceso&lt;br&gt;Get Rate" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-812" y="392" width="264" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-23" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="EVo8pNsg1WMPFgOCAEa_-22" target="EVo8pNsg1WMPFgOCAEa_-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-987" y="354" as="sourcePoint" />
            <mxPoint x="-937" y="304" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-24" value="Dest&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Country&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Currency" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="-938" y="365" width="110" height="58.5" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-25" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="EVo8pNsg1WMPFgOCAEa_-22">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1016" y="346" as="sourcePoint" />
            <mxPoint x="-391" y="422" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-26" value="FxSource = [ Imx | Visa ]&lt;br&gt;FxBase&lt;br&gt;AllowBPS" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="-544" y="404" width="155" height="93" as="geometry" />
        </mxCell>
        <mxCell id="EVo8pNsg1WMPFgOCAEa_-27" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" target="EVo8pNsg1WMPFgOCAEa_-22">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-940" y="422" as="sourcePoint" />
            <mxPoint x="-740" y="537" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kwfKW_DqGkIRnR6Lc1RT-1" value="Se necesita indicar que un banco es de visa o de imx para aplicar el rate correcto" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;labelBackgroundColor=#FFCCCC;" vertex="1" parent="1">
          <mxGeometry x="145" y="261" width="475" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
